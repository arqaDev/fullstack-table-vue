{"ast":null,"code":"import axios from 'axios';\nimport TableComponent from './components/TableComponent.vue';\nimport ModalComponent from './components/UI/ModalComponent.vue';\nimport SearchAndSort from './components/UI/SearchAndSort.vue';\nimport PaginationComponent from './components/PaginationComponent.vue';\nexport default {\n  name: 'App',\n  components: {\n    TableComponent,\n    ModalComponent,\n    SearchAndSort,\n    PaginationComponent\n  },\n\n  data() {\n    return {\n      rows: [],\n      isShowen: false,\n      selectedSort: '',\n      searchTerm: '',\n      currentPage: 1,\n      limit: 5,\n      totalPages: 0,\n      start: 0,\n      end: 5\n    };\n  },\n\n  methods: {\n    async addRow(title, quantity, distance) {\n      const $host = axios.create({\n        baseURL: process.env.VUE_APP_API_URL\n      });\n      const data = await $host.post('api/table', {\n        title,\n        quantity,\n        distance\n      });\n      return data;\n    },\n\n    async fetchTable() {\n      const $host = axios.create({\n        baseURL: process.env.VUE_APP_API_URL\n      });\n      const {\n        data\n      } = await $host.get('api/table');\n      this.rows = this.sortedAndSearchedTodos(data).slice(this.start, this.end);\n      this.totalPages = Math.ceil(data.length / this.limit);\n    },\n\n    sortTable(rows) {\n      if (this.selectedSort === 'title') {\n        return [...rows].sort((row1, row2) => row1[this.selectedSort].localeCompare(row2[this.selectedSort]));\n      } else if (this.selectedSort) {\n        // if quantity or distance the same, then sort will be done by title\n        return [...rows].sort((row1, row2) => row1[this.selectedSort] === row2[this.selectedSort] ? row1['title'].localeCompare(row2['title']) : row1[this.selectedSort] - row2[this.selectedSort]);\n      } else {\n        return rows.reverse();\n      }\n    },\n\n    sortedAndSearchedTodos(rows) {\n      return this.sortTable(rows).filter(row => row.title.toLowerCase().includes(this.searchTerm.toLowerCase()));\n    },\n\n    setSelectedSort(type) {\n      this.selectedSort = type;\n    },\n\n    showModal() {\n      this.isShowen = true;\n    }\n\n  },\n\n  mounted() {\n    this.fetchTable();\n  },\n\n  watch: {\n    selectedSort() {\n      this.fetchTable();\n    },\n\n    searchTerm() {\n      this.fetchTable();\n    },\n\n    currentPage(newVal, prevVal) {\n      console.log(newVal, prevVal);\n\n      if (newVal > prevVal) {\n        this.start += this.limit;\n      } else if (newVal < prevVal) {\n        this.start -= this.limit;\n      }\n\n      this.end = this.currentPage * this.limit;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","TableComponent","ModalComponent","SearchAndSort","PaginationComponent","name","components","data","rows","isShowen","selectedSort","searchTerm","currentPage","limit","totalPages","start","end","methods","addRow","title","quantity","distance","$host","create","baseURL","process","env","VUE_APP_API_URL","post","fetchTable","get","sortedAndSearchedTodos","slice","Math","ceil","length","sortTable","sort","row1","row2","localeCompare","reverse","filter","row","toLowerCase","includes","setSelectedSort","type","showModal","mounted","watch","newVal","prevVal","console","log"],"sourceRoot":"","sources":["C:\\Users\\Лидия\\Desktop\\Frontend\\fullstack-practice\\client\\src\\App.vue"],"sourcesContent":["<template>\n  <modal-component\n    :show=\"isShowen\"\n    @create=\"addRow\"\n    v-model:show=\"isShowen\"\n  />\n  <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n    <custom-button @click=\"showModal\">Add Row</custom-button>\n    <search-and-sort\n      v-model:searchValue=\"searchTerm\"\n      :modelValue=\"selectedSort\"\n      @update:modelValue=\"setSelectedSort\"\n    />\n  </div>\n  <table-component\n    :rows=\"rows\"\n  /> \n  <pagination-component\n    v-model:page=\"currentPage\"\n    :page=\"currentPage\"\n    :pages=\"totalPages\"\n  />\n</template>\n\n<script>\n  import axios from 'axios';\n  import TableComponent from './components/TableComponent.vue';\n  import ModalComponent from './components/UI/ModalComponent.vue';\n  import SearchAndSort from './components/UI/SearchAndSort.vue';\n  import PaginationComponent from './components/PaginationComponent.vue'\n\n  export default {\n    name: 'App',\n    components: {\n      TableComponent,\n      ModalComponent,\n      SearchAndSort,\n      PaginationComponent\n    },\n    data() {\n      return {\n        rows: [],\n        isShowen: false,\n        selectedSort: '',\n        searchTerm: '',\n        currentPage: 1,\n        limit: 5,\n        totalPages: 0,\n        start: 0,\n        end: 5\n      }\n    },\n    methods: {\n      async addRow (title, quantity, distance) {\n        const $host = axios.create({\n            baseURL: process.env.VUE_APP_API_URL\n        })\n        const data = await $host.post('api/table', {title, quantity, distance})\n        return data\n      },\n      async fetchTable() {\n        const $host = axios.create({\n            baseURL: process.env.VUE_APP_API_URL\n        })\n        const {data} = await $host.get('api/table')\n        this.rows = this.sortedAndSearchedTodos(data).slice(this.start, this.end)\n        this.totalPages = Math.ceil(data.length / this.limit)\n      },\n      sortTable(rows) {\n        if (this.selectedSort === 'title') {\n          return [...rows].sort((row1, row2) => row1[this.selectedSort].localeCompare(row2[this.selectedSort]))\n        } else if (this.selectedSort) {\n\n          // if quantity or distance the same, then sort will be done by title\n          return [...rows].sort((row1, row2) => row1[this.selectedSort] === row2[this.selectedSort] \n            ? row1['title'].localeCompare(row2['title'])\n            : row1[this.selectedSort] - row2[this.selectedSort])\n        } else {\n          return rows.reverse()\n        }\n      },\n      sortedAndSearchedTodos(rows) {\n          return this.sortTable(rows).filter(row => row.title.toLowerCase().includes(this.searchTerm.toLowerCase()))\n      },\n      setSelectedSort(type) {\n        this.selectedSort = type\n      },\n      showModal() {\n        this.isShowen = true\n      }\n    },\n    mounted() {\n      this.fetchTable()\n    },\n    watch: {\n      selectedSort() {\n        this.fetchTable()\n      },\n      searchTerm() {\n        this.fetchTable()\n      },\n      currentPage(newVal, prevVal) {\n        console.log(newVal, prevVal)\n        if (newVal > prevVal) {\n          this.start += this.limit\n        } else if (newVal < prevVal) {\n          this.start -= this.limit\n        }\n        this.end = this.currentPage * this.limit\n      }\n    }\n}\n</script>\n\n<style>\n  @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');\n\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-size: 14px;\n    font-family: 'Poppins', sans-serif;\n  }\n\n  body {\n    padding: 5% 10%;\n    background: #f5f5f5;\n  }\n</style>\n"]},"metadata":{},"sourceType":"module"}